var c=Object.defineProperty;var n=(r,a,e)=>a in r?c(r,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[a]=e;var t=(r,a,e)=>(n(r,typeof a!="symbol"?a+"":a,e),e);import{E as l}from"./entidade.model.c414101a.js";var s=(r=>(r.Baixa="Baixa",r.Media="M\xE9dia",r.Alta="Alta",r))(s||{});class d extends l{constructor(e,i,o){super();t(this,"descricao");t(this,"prioridade");t(this,"dataCriacao");o&&(this.id=o),this.descricao=e,this.dataCriacao=new Date,this.prioridade=i}}class h{constructor(){t(this,"localStorage");t(this,"tarefas");this.localStorage=window.localStorage,this.tarefas=this.selecionarTodos()}gravar(){const a=JSON.stringify(this.tarefas);this.localStorage.setItem("tarefas",a)}inserir(a){this.tarefas.push(a),this.gravar()}editar(a,e){const i=this.tarefas.findIndex(o=>o.id===a);this.tarefas[i]={id:a,descricao:e.descricao,dataCriacao:e.dataCriacao,prioridade:e.prioridade},this.gravar()}excluir(a){this.tarefas=this.tarefas.filter(e=>e.id!==a),this.gravar()}selecionarTodos(){const a=this.localStorage.getItem("tarefas");return a?JSON.parse(a):[]}selecionarPorId(a){return this.tarefas.find(e=>e.id===a)}}class u{constructor(a,e){t(this,"txtDescricao");t(this,"rdbPrioridade");t(this,"btnSalvar");t(this,"idSelecionado");if(this.repositorioTarefas=a,this.configurarElementos(),e){this.idSelecionado=e;const i=this.repositorioTarefas.selecionarPorId(e);i&&this.preencherFormulario(i)}}preencherFormulario(a){switch(this.txtDescricao.value=a.descricao,a.prioridade){case s.Baixa:this.rdbPrioridade=document.querySelector("input[value='Baixa']");break;case s.Media:this.rdbPrioridade=document.querySelector("input[value='M\xE9dia']");break;case s.Alta:this.rdbPrioridade=document.querySelector("input[value='Alta']");break}this.rdbPrioridade.checked=!0}configurarElementos(){this.txtDescricao=document.getElementById("txtDescricao"),this.btnSalvar=document.getElementById("btnSalvar"),this.btnSalvar.addEventListener("click",a=>this.gravarRegistro())}gravarRegistro(){const a=this.obterDadosFormularario();this.idSelecionado?this.repositorioTarefas.editar(a.id,a):this.repositorioTarefas.inserir(a),window.location.href="tarefa.list.html"}obterDadosFormularario(){const a=this.txtDescricao.value,e=this.obterPrioridadeSelecionada();let i=null;return this.idSelecionado?i=new d(a,e,this.idSelecionado):i=new d(a,e),i}obterPrioridadeSelecionada(){return document.querySelector("input[type='radio']:checked").value}}const f=new URLSearchParams(window.location.search),S=f.get("id");new u(new h,S);
